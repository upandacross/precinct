{% extends "base.html" %}

{% block title %}About - Precinct Leaders App{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1><i class="fas fa-info-circle"></i> About Precint Leaders App</h1>
        <p class="lead">A secure Precinct Leadeers application with user authentication.</p>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-rocket"></i> Precinct Leaders Application Overview</h5>
            </div>
            <div class="card-body">
                <p>This App is intended to provide useful information to Precinct Leaders and is a comprehensive web application that demonstrates modern web development practices.</p>
                <p>The information provided includes:</p>
                <ul>
                    <li>A map of your precinct and adjacent precincts</li>
                    <li>Organized precincts shaded blue</li>
                    <li>Unorganized precincts shaded gray</li>
                    <li>Click on an organized precinct and you get the Chair person's name and phone number</li>
                    <li>An analytics dashboard showing key statistics about your precinct</li>
                </ul>
                
                <h6><i class="fas fa-star"></i> Key Features</h6>
                <ul>
                    <li><strong>Maps of precincts:</strong> with zoom, pan, and interactive features</li>
                    <li><strong>User Authentication:</strong> Secure login/logout system with password hashing</li>
                    <li><strong>Unique Passwords:</strong> Enforces password uniqueness across all users</li>
                    <li><strong>Responsive Design:</strong> responsive interface for phones and tablets (hopefully)</li>
                    <li><strong>Security:</strong> Enforced host delivery and secure session management</li>
                    <li><strong>User Profiles:</strong> Individual user profile pages</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-shield-alt"></i> Security Features</h5>
            </div>
            <div class="card-body">
                <h6><i class="fas fa-lock"></i> Authentication & Access Control</h6>
                <ul class="list-unstyled mb-3">
                    <li><i class="fas fa-check text-success"></i> <strong>Secure Password Hashing</strong> - Werkzeug password protection</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Unique Password Enforcement</strong> - Prevents password reuse</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Role-Based Access Control</strong> - Admin, County, and User roles</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Secure Login Forms</strong> - CSRF protection and validation</li>
                </ul>

                <h6><i class="fas fa-clock"></i> Session Security</h6>
                <ul class="list-unstyled mb-3">
                    <li><i class="fas fa-check text-success"></i> <strong>Automatic Session Timeout</strong> - 30min (dev) / 15min (prod)</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Activity-Based Extension</strong> - Sessions extend with user activity</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Proactive Warnings</strong> - 5min warning before timeout</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Secure Session Cookies</strong> - HTTPOnly and SameSite protection</li>
                </ul>

                <h6><i class="fas fa-tachometer-alt"></i> Rate Limiting & DoS Protection</h6>
                <ul class="list-unstyled mb-3">
                    <li><i class="fas fa-check text-success"></i> <strong>Login Brute Force Protection</strong> - 10 attempts/minute</li>
                    <li><i class="fas fa-check text-success"></i> <strong>File Access Limits</strong> - 100 requests/hour per endpoint</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Global Rate Limits</strong> - 200/day, 50/hour (dev)</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Production Limits</strong> - Stricter 100/day, 20/hour</li>
                </ul>

                <h6><i class="fas fa-server"></i> Infrastructure Security</h6>
                <ul class="list-unstyled mb-0">
                    <li><i class="fas fa-check text-success"></i> <strong>Input Validation</strong> - Server-side form validation</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Path Traversal Protection</strong> - Secure file access controls</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Error Handling</strong> - User-friendly security error messages</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Admin Interface Security</strong> - Restricted Flask-Admin access</li>
                </ul>

                <div class="alert alert-info mt-3">
                    <i class="fas fa-info-circle"></i> <strong>Security Implementation:</strong> 
                    Enhanced security features implemented October 2025 including Flask-Limiter rate limiting 
                    and comprehensive session timeout management with real-time monitoring.
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-database"></i> Database Schema</h5>
            </div>
            <div class="card-body">
                <p>The application uses a modern database design with the following user model:</p>
                <div class="table-responsive">
                    <table class="table table-sm table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Field</th>
                                <th>Constraints</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>username</code></td>
                                <td>Unique and Required</td>
                                <td>User login name</td>
                            </tr>
                            <tr class="table-warning">
                                <td><code>password</code></td>
                                <td>Unique and Required</td>
                                <td>User password: entered in text, encrypted in database</td>
                            </tr>
                            <tr>
                                <td><code>precinct</code></td>
                                <td>Your precinct</td>
                                <td>Entered during registration</td>
                            </tr>
                            <tr>
                                <td><code>precinct role</code></td>
                                <td>Your role in the precinct organization</td>
                                <td>Entered during registration</td>
                            </tr>
                            <tr>
                                <td><code>precinct map</code></td>
                                <td>Map of your precinct</td>
                                <td>Entered during registration</td>
                            </tr>
                            <tr>
                                <td><code>phone number</code></td>
                                <td>Required, Your phone number</td>
                                <td>Entered during registration</td>
                            </tr>
                            <tr>
                                <td><code>email</code></td>
                                <td>Optional but recommended,Your email</td>
                                <td>Entered during registration</td>
                            </tr>
                            <tr>
                                <td><code>precinct number</code></td>
                                <td>Your precinct number</td>
                                <td>Entered during registration</td>
                            </tr>
                            <tr>
                                <td><code>Your user account created date/time</code></td>
                                <td>Set at Registration to that day's date/time</td>
                                <td>Account creation timestamp</td>
                            </tr>
                            <tr>
                                <td><code>Your last_login date/time</code></td>
                                <td>Automatically Updated</td>
                                <td>Last login timestamp</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="alert alert-info mt-3">
                    <i class="fas fa-info-circle"></i> <strong>Note:</strong> Because the username and password fields are unique, no two users can duplicate them, enhancing security by preventing password reuse of either field.
                </div>
            </div>
        </div>
    </div>
</div>

{% if current_user.is_authenticated %}
<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-success">
            <h6><i class="fas fa-user-check"></i> Welcome, {{ current_user.username }}!</h6>
            <p class="mb-0">You are currently logged in as 
                {% if current_user.is_admin %}
                    <span class="badge bg-danger">Administrator</span>
                {% elif current_user.is_county %}
                    <span class="badge bg-warning">County User</span>
                {% else %}
                    <span class="badge bg-primary">Precinct Leader/Resident</span>
                {% endif %}
            </p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}